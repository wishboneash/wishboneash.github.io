<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Custom Messenger UI</title>
    <script type="text/javascript" charset="utf-8">
        (function (g, e, n, es, ys) {
          g['_genesysJs'] = e;
          g[e] = g[e] || function () {
            (g[e].q = g[e].q || []).push(arguments)
          };
          g[e].t = 1 * new Date();
          g[e].c = es;
          ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
        })(window, 'Genesys', 'https://apps.mypurecloud.de/genesys-bootstrap/genesys.min.js', {
          environment: 'prod-euc1',
          deploymentId: '74c21148-3dd7-4d64-ba92-2a250fc7aa94',
          debug: true 
        });
      </script>


    <script src="https://apps.mypurecloud.de/messenger/sdk/genesys-messenger.min.js"></script>
    <script>
        // Initialize the Messenger with your deployment ID
        window._genesys = {
            messenger: {
                deploymentId: '74c21148-3dd7-4d64-ba92-2a250fc7aa94',
                // Additional configuration options
            }
        };

        // Register the MessagingService plugin
        Genesys("subscribe", "MessagingService.ready", function() {
            console.log("MessagingService is ready.");

            // Start a conversation when your custom UI triggers it
            document.getElementById('startChat').addEventListener('click', function() {
                Genesys("command", "MessagingService.startConversation", {}, function() {
                    console.log("Conversation started successfully.");
                }, function(error) {
                    console.error("Error starting conversation:", error);
                });
            });
        });

        // Subscribe to incoming messages
        Genesys("subscribe", "MessagingService.messageReceived", function(event) {
            console.log("Message received:", event.data);
            // Update your custom UI with the received message
        });

        // Function to send a message
        function sendMessage() {
            var message = document.getElementById('messageInput').value;
            Genesys("command", "MessagingService.sendMessage", { text: message }, function() {
                console.log("Message sent successfully.");
            }, function(error) {
                console.error("Error sending message:", error);
            });
        }
    </script>
</head>
<body>
    <div id="customChatUI">
        <button id="startChat">Start Chat</button>
        <div id="chatWindow">
            <!-- Custom chat messages will be displayed here -->
        </div>
        <input type="text" id="messageInput" placeholder="Type your message here...">
        <button onclick="sendMessage()">Send</button>
    </div>
</body>
</html>
